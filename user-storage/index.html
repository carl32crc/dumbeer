<div ng-app="app">
    <div ng-controller="CheckInController">
		<div ng-repeat="beer in beers">
			{{beer.name}}:
			<button ng-click="checkIn(beer)" ng-disabled="hasCheckedIn">Check in</button>
		</div>
    	<br>
    </div>

    <div ng-show="storage.checkIn" ng-controller="HistoryController">
		Check in history:
		<div ng-repeat="checkin in storage.checkIn">
			<strong>{{ checkin.beerName }}</strong> on <time>{{ checkin.date | date : 'short' }}</time>
		</div>
    </div>	
    
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.0.7/angular.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ngStorage/0.3.6/ngStorage.min.js"></script>
    <script>
    	angular.module('app', ['ngStorage'])
	    	.controller('CheckInController', function($scope, $localStorage) {
	    		$scope.storage = $localStorage;
	    		$scope.beers = [
	    			{
	    				id: 1,
	    				name: 'Estrella',
	    			},
	    			{
	    				id: 2,
	    				name: 'Sierra Nevada',
	    			},
	    			{
	    				id: 3,
	    				name: 'New Belgium',
	    			}
	    		];
	    		$scope.hasCheckedIn = false;
				$scope.checkIn = function(beer) {
					if($scope.hasCheckedIn === false){
						if($scope.storage.checkIn === undefined){
							$scope.storage.checkIn = [];
						}
						var date = new Date();
						var checkInObject = {
							beerId: beer.id,
							beerName: beer.name,
							date: date						
						}
						$scope.storage.checkIn.push(checkInObject)
						// $scope.hasCheckedIn = true;
					}					
				};
	    	})
	    	.controller('HistoryController', function($scope, $localStorage) {
	    		$scope.storage = $localStorage;	    		
	    	})
    </script>
</div>